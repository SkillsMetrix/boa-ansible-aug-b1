- name: check the background of remote machine
  apt:
    update_cache: true
    cache_valid_time: 3600

- name: Gather OS Information
  setup:
    gather_subset:
      - "os_family"

- name: print OS Information
  debug:
    msg: "the underlying OS is  {{ansible_os_family}}"



---


 
  
  
    - name: install apache to the web remote machine
      apt: 
        name:
          - apache2 
        state: latest

    - name: chacke the status of installation
      command: systemctl status apache2
      register: apache_status
    
    - name: print the status
      debug:
        msg: "{{apache_status.stdout}}"


-----



- hosts: web
  become: true

  pre_tasks:
    - name: load the background check
      import_tasks: pretask.yaml
  
  tasks:
    - name: install software
      import_tasks: maintask.yaml
